# Prompt Scribe

[![NPM version](https://img.shields.io/npm/v/prompt-scribe.svg?style=flat)](https://www.npmjs.com/package/prompt-scribe)

A simple, zero-configuration build tool that compiles markdown (`.md`) prompt files into TypeScript (`.ts`) modules, making them easy and reliable to import into your application.

## Why?

Managing AI prompts written in markdown directly within TypeScript template literals is cumbersome and lacks proper editor support for syntax highlighting and formatting. `prompt-scribe` solves this by allowing you to maintain prompts in their native `.md` format while providing the reliability of static TypeScript imports at build time.

This gives you the best of both worlds:
-   **Excellent Developer Experience**: Write and maintain prompts in pure markdown.
-   **Production Reliability**: Benefit from static, compiled inclusion of prompts into your codebase.

## Installation

Install the package as a development dependency in your project:

```bash
npm install --save-dev prompt-scribe
```

## Usage

`prompt-scribe` is designed to work out-of-the-box with sensible defaults. You can add it to the `scripts` section of your `package.json`.

```json
\\\"scripts\\\": {
  \\\"prompts:compile\\\": \\\"prompt-scribe\\\",
  \\\"prompts:watch\\\": \\\"prompt-scribe --watch\\\"
}
```

### How it Works

1.  **Run the compiler**:
    -   `npm run prompts:compile` will run a one-time compilation.
    -   `npm run prompts:watch` will start a process that watches for changes and compiles automatically.

2.  **Input**: The compiler searches for files matching a glob pattern.
    -   **Default Pattern**: `**/prompts/*.md` (any `.md` file inside any directory named `prompts`).

3.  **Output**: For each found markdown file (e.g., `greeting.md`), it generates a TypeScript file in the same directory (`greeting.md.ts`).

    The generated file will look like this:

    ```typescript
    // greeting.md.ts
    // This file is auto-generated by prompt-scribe. Do not edit manually.
    export default = `
    The full content of your markdown file is here...
    `;
    ```

### Example Workflow

Here's a step-by-step example of how to create and use a prompt.

**1. Create your prompt file**

Create a markdown file inside a `prompts` directory. This is required for the default compiler to find it.

*File structure:*
```
/src
└── /agents
    └── /prompts
        └── greeting.md
```

*File content of `greeting.md`:*
```markdown
You are a helpful onboarding assistant. Your goal is to welcome the new user.
```

**2. Run the compiler**

Execute the compile script you set up in `package.json`:
```bash
npm run prompts:compile
```
This generates a TypeScript module right next to your markdown file: `greeting.md.ts`.

**3. Import and use the prompt**

Finally, import the compiled `prompt` from the generated module into your application code. Notice that you import from the `.md` file, but your TypeScript configuration will resolve it to the generated `.md.ts` file.

*File content of `src/agents/SomeSample.ts`:*
```typescript
import greetingPrompt from './prompts/greeting.md';

class SomeSample {
  getWelcomeMessage(): string {
    // greetingPrompt is a string with the content of your markdown file.
    return greetingPrompt;
  }
}
```

### Overriding the Default Glob Pattern

If your prompts are not located in `prompts/` directories, you can pass a custom glob pattern as an argument:

```json
\\\"scripts\\\": {
  \\\"prompt:compile-custom\\\": \\\"prompt-scribe 'src/agents/**/*.md'\\\"
}
```

## Local Development

To test `prompt-scribe` locally during its development:

1.  In the `prompt-scribe` project directory, run:
    ```bash
    npm link
    ```
2.  In the project where you want to test `prompt-scribe`, run:
    ```bash
    npm link prompt-scribe
    ```
This will allow you to run the `prompt-scribe` command and test your local changes.

## License

MIT